<Window x:Class="GUI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:GUI.Converters"
        xmlns:controls="clr-namespace:GUI.Controls"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <converters:SquareConverter x:Key="backgroundConverter">
            <converters:SquareConverter.Unknown>
                Gray
            </converters:SquareConverter.Unknown>
            <converters:SquareConverter.Empty>
                White
            </converters:SquareConverter.Empty>
            <converters:SquareConverter.Filled>
                Black
            </converters:SquareConverter.Filled>
        </converters:SquareConverter>

        <converters:BoolConverter x:Key="isSatisfiedConverter">
            <converters:BoolConverter.False>
                Normal
            </converters:BoolConverter.False>
            <converters:BoolConverter.True>
                Bold
            </converters:BoolConverter.True>
        </converters:BoolConverter>
    </Window.Resources>
    
    <controls:PuzzleControl ViewModel="{Binding}">
        <controls:PuzzleControl.SquareTemplate>
            <DataTemplate>
                <controls:PuzzleGridSquareControl ViewModel="{Binding}" BorderThickness="1" BorderBrush="Black" Width="16" Height="16" Margin="1" />
            </DataTemplate>
        </controls:PuzzleControl.SquareTemplate>
        <controls:PuzzleControl.ColumnConstraintsTemplate>
            <DataTemplate>
                <controls:PuzzleConstraintsControl Orientation="Vertical" Background="Red" Margin="1" />
            </DataTemplate>
        </controls:PuzzleControl.ColumnConstraintsTemplate>
        <controls:PuzzleControl.RowConstraintsTemplate>
            <DataTemplate>
                <controls:PuzzleConstraintsControl Orientation="Horizontal" Background="Blue" Margin="1" />
            </DataTemplate>
        </controls:PuzzleControl.RowConstraintsTemplate>
    </controls:PuzzleControl>
    
    <!--<Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="auto" />
        </Grid.RowDefinitions>

        <ItemsControl DataContext="{Binding ColumnConstraints}" Grid.Row="0" Grid.Column="1" ItemsSource="{Binding Items}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <ItemsControl VerticalAlignment="Bottom" ItemsSource="{Binding Values}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Vertical" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Margin="1" Width="16" Height="16">
                                    <TextBlock Text="{Binding Number.Value}" HorizontalAlignment="Center" FontWeight="{Binding IsSatisfied.Value, Converter={StaticResource isSatisfiedConverter}}" />
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

        <ItemsControl DataContext="{Binding RowConstraints}" Grid.Row="1" Grid.Column="0" ItemsSource="{Binding Items}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Vertical" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <ItemsControl HorizontalAlignment="Right" ItemsSource="{Binding Values}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Margin="1" Width="16" Height="16">
                                    <TextBlock Text="{Binding Number.Value}" VerticalAlignment="Center" FontWeight="{Binding IsSatisfied.Value, Converter={StaticResource isSatisfiedConverter}}" />
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

        <ItemsControl DataContext="{Binding Grid}" Grid.Column="1" Grid.Row="1" ItemsSource="{Binding Rows}" HorizontalAlignment="Center" VerticalAlignment="Center">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Vertical" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <ItemsControl ItemsSource="{Binding}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Button Width="16"
                                        Height="16"
                                        Margin="1"
                                        BorderBrush="Black"
                                        BorderThickness="1"
                                        Background="{Binding Contents.Value, Converter={StaticResource backgroundConverter}}"
                                        Command="{Binding Toggle}">
                                    <Button.Template>
                                        <ControlTemplate TargetType="{x:Type Button}">
                                            <Border Width="{TemplateBinding Width}"
                                                    Height="{TemplateBinding Height}"
                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                    Background="{TemplateBinding Background}"
                                                    Margin="{TemplateBinding Margin}" />
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>-->
</Window>
