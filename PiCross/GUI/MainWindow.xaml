<Window x:Class="GUI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:picross="clr-namespace:PiCross.Game;assembly=PiCrossDomain"
        xmlns:controls="clr-namespace:GUI.Controls"
        xmlns:converters="clr-namespace:GUI.Converters"
        Title="MainWindow" Height="450" Width="800">
    <Window.Resources>
        <converters:BoolConverter x:Key="isFilledConverter" True="{x:Static picross:Square.FILLED}" False="{x:Static picross:Square.EMPTY}" />
    </Window.Resources>
    <DockPanel>
        <Menu x:Name="menu" DockPanel.Dock="Top" IsMainMenu="True">
            <MenuItem Header="Themes">
                <MenuItem Header="Generic" Command="{Binding SetTheme}" CommandParameter="generic" />
                <MenuItem Header="Nature" Command="{Binding SetTheme}" CommandParameter="nature" />
                <MenuItem Header="Water" Command="{Binding SetTheme}" CommandParameter="water" />
            </MenuItem>
        </Menu>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <controls:PiCrossControl x:Name="editorControl" PuzzleData="{Binding}" Margin="5" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0">
                <controls:PiCrossControl.SquareTemplate>
                    <DataTemplate>
                        <controls:PuzzleGridSquareControl Contents="{Binding IsFilled.Value, Converter={StaticResource isFilledConverter}}"
                                                      Width="24"
                                                      Height="24"
                                                      LeftClick="{Binding SetFilled}"                                                      
                                                      RightClick="{Binding SetEmpty}">
                        </controls:PuzzleGridSquareControl>
                    </DataTemplate>
                </controls:PiCrossControl.SquareTemplate>

                <controls:PiCrossControl.ColumnConstraintsTemplate>
                    <DataTemplate>
                        <DockPanel LastChildFill="False" Margin="1">
                            <ItemsControl ItemsSource="{Binding Values.Value.Items}" DockPanel.Dock="Bottom">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Vertical" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Grid VerticalAlignment="Stretch">
                                            <TextBlock Text="{Binding .}"
                                                   Margin="0,5"
                                                   HorizontalAlignment="Center" />
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </DockPanel>
                    </DataTemplate>
                </controls:PiCrossControl.ColumnConstraintsTemplate>

                <controls:PiCrossControl.RowConstraintsTemplate>
                    <DataTemplate>
                        <DockPanel LastChildFill="False" Margin="1">
                            <ItemsControl ItemsSource="{Binding Values.Value.Items}" DockPanel.Dock="Right">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Horizontal" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Grid VerticalAlignment="Stretch">
                                            <TextBlock Text="{Binding .}"
                                                   Margin="5,0"
                                                   VerticalAlignment="Center" />
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </DockPanel>
                    </DataTemplate>
                </controls:PiCrossControl.RowConstraintsTemplate>
            </controls:PiCrossControl>
            
            <controls:SolveControl x:Name="solveControl" Grid.Row="0" Grid.Column="1" />
        </Grid>
    </DockPanel>
</Window>
